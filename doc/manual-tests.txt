# テスト項目

## テスト1: 休暇メールおよび転送設定の有効化

### テスト手順

  1. システム設定(settings.yml)で以下を設定
    * managesieve-serverを適切に設定
    * internal-domainsを以下に設定
      * example.com
      * example.net
  2. トップ画面からalice@exmple.comでログイン
  3.  不在期間を現在時刻の1日前～現在時刻の一日後に設定
  4. 休暇設定で以下を設定する
    * 有効に設定
    * 返信先を「社内向け」に設定
    * 件名、メール本文をそれぞれ入力
  5. 転送設定で以下を設定する
    * 有効に設定
    * 転送するアドレスを「bob@example.com」に設定
  6. 「適用」をクリックする
  7. charlie@example.comからalice@example.comに任意のメールを送信する

### 期待する結果

  1. 生成されたSieveスクリプトがManageSieveサーバに送信されること
  2. alice@example.comからcharlie@example.comに休暇メールが送信されること
    * 休暇メールの件名が設定した文字列になっていること
    * 休暇メールの本文がシステム固定の文字列 + ユーザーが設定した文字列が存在
      すること
  3. bob@example.comにcharlie@example.comからのメールが転送されること
  4. alice@example.comのinboxにもcharlie@example.comからのメールが届くこと
  5. メールサーバとユーザー(alice@example.com)のタイムゾーンが異なる場合にも同
     様の結果となること
  6. FirefoxおよびiPhoneで設定できること


## テスト2: 休暇メールのみの有効化

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順5.で転送設定は無効化する

### 期待する結果

  * 「テスト1」と同様の結果になること
  * ただし結果3.でメールが転送されないこと


## テスト3: 転送のみ有効化

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順4.で休暇メール設定は無効化する

### 期待する結果

  * 「テスト1」と同様の結果になること
  * ただし結果2.で休暇メールが送信されないこと


## テスト4: 全て無効化

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順4.および手順5.で休暇メール設定および転送設定を無効化する

### 期待する結果

  * ManageSieveサーバ上のSieveスクリプトのactive状態が解除されること
  * 休暇メールも転送メールも送信されないこと
  * メールサーバとユーザー(alice@example.com)のタイムゾーンが異なる場合にも同
    様の結果となること
  * FirefoxおよびiPhoneで設定できること


## テスト5: 不在期間の終了

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順3.で不在期間は現在時刻の5分後までとし、手順7.を5分後以降に行う
  * 最後に、Sieveフィルタ設定ページをリロードする

### 期待する結果

  * 生成されたSieveスクリプトがManageSieveサーバに送信されること
  * 休暇メールも転送メールも送信されないこと
  * 5分後以降にページをリロードしたときに、休暇メール設定および転送設定が無効
    になっていること
  * メールサーバとユーザー(alice@example.com)のタイムゾーンが異なる場合にも同
    様の結果となること
  * FirefoxおよびiPhoneで設定できること


## テスト6: 社外メールに対する休暇メール送信抑制

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順7.でのメール送信はsuzuki@example.co.jpで行う

### 期待する結果

  * 「テスト1」と同様の結果になること
  * ただし結果2.で休暇メールが送信されないこと


## テスト7: 社外メールに対する休暇メール送信

### テスト手順

  * 「テスト6」と同様に行う。
  * ただし手順4.で返信先を「社外向け」に設定する

### 期待する結果

  * 「テスト1」と同様の結果になること


## テスト8: 社内メールに対する休暇メール送信抑制

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順4.で返信先を「社外向け」に設定する

### 期待する結果

 * 「テスト1」と同様の結果になること
 * ただし結果2.で休暇メールが送信されないこと


## テスト9: 全てのメールに対する休暇メール送信

### テスト手順

  * 「テスト1」と同様に行う。
  * ただし手順4.で返信先を「両方」に設定する
  * また、手順8.として以下を加える
    * suzuki@example.co.jpからalice@example.comに任意のメールを送信する

### 期待する結果

  * 「テスト1」と同様の結果になること
  * 手順8.での結果が手順7.での結果と同様になること


## テスト10: 表示言語の切り替え

### テスト手順

  * 「テスト1」と同様に行う。
  * ただしブラウザの設定で言語を英語にする

### 期待する結果

  * 「テスト1」と同様の結果になること
  * 全てのメッセージが英語になること
